<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CS2 Modding Research</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="top-bar">
  <a href="index.html" class="site-title">CS2 Modding Research</a>
  <span class="attribution">Generated with Claude | Supervised by repository owner</span>
</div>

<div class="page-layout">

  <aside class="sidebar">
    <h3>Events &amp; Simulation</h3>
    <a href="event-entity-archetype.html">Event Entity Archetype</a>
    <a href="fire-ignition.html">Fire Ignition</a>
    <a href="vehicle-out-of-control.html">Vehicle Accidents</a>
    <a href="crime-trigger.html">Crime Trigger</a>
    <a href="citizen-sickness.html">Citizen Sickness</a>
    <a href="water-system.html">Water System</a>
    <a href="emergency-dispatch.html">Emergency Dispatch</a>

    <h3>Infrastructure</h3>
    <a href="electricity-grid.html">Electricity Grid</a>
    <a href="water-sewage-pipes.html">Water &amp; Sewage Pipes</a>
    <a href="road-network.html">Road &amp; Network Building</a>
    <a href="zoning.html">Zoning</a>

    <h3>Economy &amp; Population</h3>
    <a href="citizens-households.html">Citizens &amp; Households</a>
    <a href="economy-budget.html">Economy &amp; Budget</a>
    <a href="demand-systems.html">Demand Systems</a>
    <a href="resource-production.html">Resource Production</a>
    <a href="company-simulation.html">Company Simulation</a>
    <a href="workplace-labor.html">Workplace &amp; Labor</a>
    <a href="land-value-property.html">Land Value &amp; Property</a>
    <a href="trade-connections.html">Trade &amp; Connections</a>
    <a href="tourism-economy.html">Tourism Economy</a>

    <h3>City Services</h3>
    <a href="garbage-collection.html">Garbage Collection</a>
    <a href="education.html">Education</a>
    <a href="public-transit.html">Public Transit</a>

    <h3>Environment</h3>
    <a href="weather-climate.html">Weather &amp; Climate</a>
    <a href="pollution.html">Pollution</a>
    <a href="terrain-resources.html">Terrain &amp; Resources</a>

    <h3>Tools &amp; Input</h3>
    <a href="tool-activation.html">Tool Activation</a>
    <a href="tool-raycast.html">Tool Raycast</a>
    <a href="input-action-lifecycle.html">Input Action Lifecycle</a>
    <a href="mod-hotkey-input.html">Mod Hotkey Input</a>

    <h3>UI &amp; Settings</h3>
    <a href="mod-ui-buttons.html">Mod UI Buttons</a>
    <a href="mod-options-ui.html">Mod Options UI</a>

    <h3>Modding Framework</h3>
    <a href="save-load-persistence.html">Save/Load Persistence</a>
  </aside>

  <main class="content">

    <h1>Cities: Skylines II Modding Research</h1>

    <p>
      Decompiled game systems documented for mod developers. Each topic traces the relevant
      ECS components, systems, data flow, and Harmony patch points -- with working C# examples
      you can drop into a mod project.
    </p>

    <p>
      All research is based on decompiled source from <code>Game.dll</code> and related assemblies
      using <code>ilspycmd</code>. The raw decompiled snippets are available in the
      <a href="https://github.com/skywolf-net/cs_modding_claude">source repository</a>.
    </p>

    <!-- ============================================================ -->
    <h2>Events &amp; Simulation</h2>

    <div class="topic-grid">

      <div class="topic-card">
        <h3><a href="event-entity-archetype.html">Event Entity Archetype</a></h3>
        <p>How CS2 creates event entities from prefab archetypes -- the shared pattern behind fires, accidents, crimes, and all other simulation events.</p>
        <div class="tags">
          <span class="tag">Game.Prefabs</span>
          <span class="tag">Game.Events</span>
          <span class="tag">EventData</span>
        </div>
      </div>

      <div class="topic-card">
        <h3><a href="fire-ignition.html">Fire Ignition</a></h3>
        <p>How fires start on buildings and trees. Covers the unified Ignite/OnFire pipeline, hazard calculation (building vs forest paths), spread mechanics, and fire configuration.</p>
        <div class="tags">
          <span class="tag">Game.Events</span>
          <span class="tag">Game.Simulation</span>
          <span class="tag">IgniteSystem</span>
        </div>
      </div>

      <div class="topic-card">
        <h3><a href="vehicle-out-of-control.html">Vehicle OutOfControl &amp; Accidents</a></h3>
        <p>Vehicle collision physics, the Impact event pipeline, chain-reaction accidents, fire/injury rolls, police dispatch, and cleanup timing.</p>
        <div class="tags">
          <span class="tag">Game.Vehicles</span>
          <span class="tag">Game.Events</span>
          <span class="tag">ImpactSystem</span>
        </div>
      </div>

      <div class="topic-card">
        <h3><a href="crime-trigger.html">Crime Trigger</a></h3>
        <p>How crimes are triggered on citizens -- the CrimeCheckSystem probability pipeline, AddCriminal command pattern, and the full criminal lifecycle state machine.</p>
        <div class="tags">
          <span class="tag">Game.Events</span>
          <span class="tag">Game.Citizens</span>
          <span class="tag">CriminalSystem</span>
        </div>
      </div>

      <div class="topic-card">
        <h3><a href="citizen-sickness.html">Citizen Sickness</a></h3>
        <p>Making citizens sick programmatically via the AddHealthProblem event command. Covers the health probability curve, building-to-citizen relationships, and disease flags.</p>
        <div class="tags">
          <span class="tag">Game.Citizens</span>
          <span class="tag">Game.Simulation</span>
          <span class="tag">HealthProblem</span>
        </div>
      </div>

      <div class="topic-card">
        <h3><a href="water-system.html">Water System</a></h3>
        <p>How CS2 simulates surface water on the terrain -- rivers, lakes, ocean, flooding. GPU-based shallow water equations, WaterSourceData entities for adding/removing water, and a complete aqueduct mod blueprint.</p>
        <div class="tags">
          <span class="tag">Game.Simulation</span>
          <span class="tag">WaterSystem</span>
          <span class="tag">WaterSourceData</span>
        </div>
      </div>

      <div class="topic-card">
        <h3><a href="emergency-dispatch.html">Emergency Dispatch</a></h3>
        <p>How police, fire, ambulance, and hearse vehicles are dispatched. The request entity lifecycle, per-service dispatch pipelines, and how to force cross-service responses via ECS.</p>
        <div class="tags">
          <span class="tag">Game.Simulation</span>
          <span class="tag">Game.Events</span>
          <span class="tag">ServiceRequest</span>
        </div>
      </div>

    </div>

    <!-- ============================================================ -->
    <h2>Infrastructure</h2>

    <div class="topic-grid">

      <div class="topic-card">
        <h3><a href="electricity-grid.html">Electricity Grid</a></h3>
        <p>How electricity flows through the building/road graph. Max-flow solver on a 128-frame cycle, power plants, batteries, and the consumer fulfillment pipeline.</p>
        <div class="tags">
          <span class="tag">Game.Simulation</span>
          <span class="tag">ElectricityFlowSystem</span>
          <span class="tag">PowerPlantAISystem</span>
        </div>
      </div>

      <div class="topic-card">
        <h3><a href="water-sewage-pipes.html">Water &amp; Sewage Pipe Network</a></h3>
        <p>How fresh water flows from pumping stations through underground pipes to buildings, and sewage flows back. CPU-based max-flow graph solver, building consumption, groundwater, and pipe pollution propagation.</p>
        <div class="tags">
          <span class="tag">Game.Simulation</span>
          <span class="tag">WaterPipeFlowSystem</span>
          <span class="tag">WaterConsumer</span>
        </div>
      </div>

      <div class="topic-card">
        <h3><a href="road-network.html">Road &amp; Network Building</a></h3>
        <p>How NetToolSystem creates road segments, nodes, and lanes. The Edge/Node/Curve component model, 7 drawing modes, and the temp-to-permanent entity pipeline.</p>
        <div class="tags">
          <span class="tag">Game.Net</span>
          <span class="tag">Game.Tools</span>
          <span class="tag">NetToolSystem</span>
        </div>
      </div>

      <div class="topic-card">
        <h3><a href="zoning.html">Zoning</a></h3>
        <p>How zone blocks attach to roads and buildings spawn on them. The Block/Cell grid model, CellCheckSystem vacancy detection, and ZoneSpawnSystem building selection scoring.</p>
        <div class="tags">
          <span class="tag">Game.Zones</span>
          <span class="tag">ZoneSpawnSystem</span>
          <span class="tag">BlockSystem</span>
        </div>
      </div>

    </div>

    <!-- ============================================================ -->
    <h2>Economy &amp; Population</h2>

    <div class="topic-grid">

      <div class="topic-card">
        <h3><a href="citizens-households.html">Citizens &amp; Households</a></h3>
        <p>The full citizen lifecycle from birth to death. AgingSystem thresholds, happiness factors, immigration/emigration, job seeking, and the two-entity citizen/household model.</p>
        <div class="tags">
          <span class="tag">Game.Citizens</span>
          <span class="tag">Game.Simulation</span>
          <span class="tag">AgingSystem</span>
        </div>
      </div>

      <div class="topic-card">
        <h3><a href="economy-budget.html">Economy &amp; Budget</a></h3>
        <p>City finances: tax collection, service fees, loans, and trade. The BudgetApplySystem pipeline that sums 14 income and 15 expense categories every tick.</p>
        <div class="tags">
          <span class="tag">Game.Simulation</span>
          <span class="tag">TaxSystem</span>
          <span class="tag">BudgetSystem</span>
        </div>
      </div>

      <div class="topic-card">
        <h3><a href="demand-systems.html">Demand Systems</a></h3>
        <p>What drives residential, commercial, and industrial demand. Three independent systems with 19 demand factors, staggered updates, and DemandParameterData tuning.</p>
        <div class="tags">
          <span class="tag">Game.Simulation</span>
          <span class="tag">ResidentialDemandSystem</span>
          <span class="tag">DemandFactor</span>
        </div>
      </div>

      <div class="topic-card">
        <h3><a href="resource-production.html">Resource Production Chains</a></h3>
        <p>How resources are defined, produced, bought, sold, and consumed. The 41-type Resource enum, IndustrialProcessData recipes, ResourceBuyerSystem market matching, and the full supply chain from extraction to retail.</p>
        <div class="tags">
          <span class="tag">Game.Economy</span>
          <span class="tag">Game.Simulation</span>
          <span class="tag">ResourceBuyerSystem</span>
        </div>
      </div>

      <div class="topic-card">
        <h3><a href="company-simulation.html">Company Simulation</a></h3>
        <p>How companies operate from spawning through production, profitability tracking, dividend payments to households, and bankruptcy/move-away decisions. The five-phase daily pipeline driving the city economy.</p>
        <div class="tags">
          <span class="tag">Game.Companies</span>
          <span class="tag">Game.Simulation</span>
          <span class="tag">CompanyProfitabilitySystem</span>
        </div>
      </div>

      <div class="topic-card">
        <h3><a href="workplace-labor.html">Workplace &amp; Labor Market</a></h3>
        <p>How workplaces are created on companies and buildings, workers distributed by education level, job seekers matched via pathfinding, layoffs triggered, and commuters spawned from outside connections.</p>
        <div class="tags">
          <span class="tag">Game.Companies</span>
          <span class="tag">Game.Simulation</span>
          <span class="tag">WorkProviderSystem</span>
        </div>
      </div>

      <div class="topic-card">
        <h3><a href="land-value-property.html">Land Value &amp; Property Market</a></h3>
        <p>How land value is calculated from service coverage, attractiveness, and pollution. The rent formula, rent payment pipeline, and the building level-up/level-down lifecycle driven by building condition.</p>
        <div class="tags">
          <span class="tag">Game.Simulation</span>
          <span class="tag">LandValueSystem</span>
          <span class="tag">PropertyRenterSystem</span>
        </div>
      </div>

      <div class="topic-card">
        <h3><a href="trade-connections.html">Trade &amp; Outside Connections</a></h3>
        <p>How resources, electricity, and water flow between the city and the outside world. Trade cost calculation from weight/distance multipliers, the ResourceExporterSystem delivery pipeline, utility trade via flow graph solvers, and connection delay feedback.</p>
        <div class="tags">
          <span class="tag">Game.Simulation</span>
          <span class="tag">TradeSystem</span>
          <span class="tag">OutsideConnection</span>
        </div>
      </div>

      <div class="topic-card">
        <h3><a href="tourism-economy.html">Tourism Economy</a></h3>
        <p>Tourist spawning from attractiveness scoring, hotel reservation via pathfinding, nightly pricing, weather-dependent arrival rates, and departure triggers. The full tourist lifecycle from outside connection to checkout.</p>
        <div class="tags">
          <span class="tag">Game.Simulation</span>
          <span class="tag">TourismSystem</span>
          <span class="tag">TouristSpawnSystem</span>
        </div>
      </div>

    </div>

    <!-- ============================================================ -->
    <h2>City Services</h2>

    <div class="topic-grid">

      <div class="topic-card">
        <h3><a href="garbage-collection.html">Garbage Collection</a></h3>
        <p>The four-stage garbage pipeline: accumulation on buildings, collection request creation, truck dispatch via pathfinding, and facility processing (landfill/incineration).</p>
        <div class="tags">
          <span class="tag">Game.Simulation</span>
          <span class="tag">Game.Buildings</span>
          <span class="tag">GarbageTruckAISystem</span>
        </div>
      </div>

      <div class="topic-card">
        <h3><a href="education.html">Education</a></h3>
        <p>The enrollment-to-graduation pipeline. School seeking, daily commute scheduling, graduation probability formulas, and the economic dropout decision model.</p>
        <div class="tags">
          <span class="tag">Game.Simulation</span>
          <span class="tag">Game.Citizens</span>
          <span class="tag">GraduationSystem</span>
        </div>
      </div>

      <div class="topic-card">
        <h3><a href="public-transit.html">Public Transit</a></h3>
        <p>Transport line management: the Route entity hierarchy, vehicle dispatch from depots, queue-based boarding, day/night scheduling, and 14 transit types.</p>
        <div class="tags">
          <span class="tag">Game.Routes</span>
          <span class="tag">Game.Simulation</span>
          <span class="tag">TransportLineSystem</span>
        </div>
      </div>

    </div>

    <!-- ============================================================ -->
    <h2>Environment</h2>

    <div class="topic-grid">

      <div class="topic-card">
        <h3><a href="weather-climate.html">Weather &amp; Climate</a></h3>
        <p>Seasonal climate cycles, weather phenomena spawning, lightning strikes, building damage, snow accumulation, and wind simulation. All climate properties are OverridableProperty (mod-friendly).</p>
        <div class="tags">
          <span class="tag">Game.Simulation</span>
          <span class="tag">ClimateSystem</span>
          <span class="tag">WeatherPhenomenonSystem</span>
        </div>
      </div>

      <div class="topic-card">
        <h3><a href="pollution.html">Pollution</a></h3>
        <p>Three independent 256x256 pollution grids: air (wind-driven advection), ground (fade-only, contaminates groundwater), and noise (recalculated each tick). Grid-based spread and effects.</p>
        <div class="tags">
          <span class="tag">Game.Simulation</span>
          <span class="tag">AirPollutionSystem</span>
          <span class="tag">CellMapSystem</span>
        </div>
      </div>

      <div class="topic-card">
        <h3><a href="terrain-resources.html">Terrain &amp; Resources</a></h3>
        <p>GPU heightmap terrain, Perlin noise resource distribution (fertility, ore, oil, fish), tree growth lifecycle, and terrain attractiveness scoring for land value.</p>
        <div class="tags">
          <span class="tag">Game.Simulation</span>
          <span class="tag">TerrainSystem</span>
          <span class="tag">NaturalResourceSystem</span>
        </div>
      </div>

    </div>

    <!-- ============================================================ -->
    <h2>Tools &amp; Input</h2>

    <div class="topic-grid">

      <div class="topic-card">
        <h3><a href="tool-activation.html">Tool Activation</a></h3>
        <p>Is it safe to set <code>ToolSystem.activeTool</code> from a TriggerBinding callback? Yes. Traces the setter, RequireFullUpdate, and ToolUpdate detection.</p>
        <div class="tags">
          <span class="tag">Game.Tools</span>
          <span class="tag">ToolSystem</span>
        </div>
      </div>

      <div class="topic-card">
        <h3><a href="tool-raycast.html">Tool Raycast &amp; Entity Selection</a></h3>
        <p>How CS2 casts rays from the camera to detect entities. Covers InitializeRaycast configuration, RaycastSystem internals, and the hover/selection pipeline.</p>
        <div class="tags">
          <span class="tag">Game.Tools</span>
          <span class="tag">Game.Rendering</span>
          <span class="tag">RaycastSystem</span>
        </div>
      </div>

      <div class="topic-card">
        <h3><a href="input-action-lifecycle.html">Input Action Lifecycle</a></h3>
        <p>How <code>ProxyAction</code> input bindings move through enabled/disabled states. Covers the lifecycle from creation through <code>shouldBeEnabled</code> to actual activation.</p>
        <div class="tags">
          <span class="tag">Game.Input</span>
          <span class="tag">ProxyAction</span>
        </div>
      </div>

      <div class="topic-card">
        <h3><a href="mod-hotkey-input.html">Mod Hotkey Input</a></h3>
        <p>Registering custom hotkeys in CS2 mods. How to create ProxyAction bindings, handle key combos, and integrate with the game's input manager.</p>
        <div class="tags">
          <span class="tag">Game.Input</span>
          <span class="tag">InputManager</span>
        </div>
      </div>

    </div>

    <!-- ============================================================ -->
    <h2>UI &amp; Settings</h2>

    <div class="topic-grid">

      <div class="topic-card">
        <h3><a href="mod-ui-buttons.html">Mod UI Buttons</a></h3>
        <p>Adding custom buttons to the CS2 toolbar. Covers TriggerBinding, ValueBinding, and the UI event system for mod-added controls.</p>
        <div class="tags">
          <span class="tag">Colossal.UI.Binding</span>
          <span class="tag">UISystemBase</span>
        </div>
      </div>

      <div class="topic-card">
        <h3><a href="mod-options-ui.html">Mod Options UI</a></h3>
        <p>Building settings panels for CS2 mods. Covers the options registration API, supported widget types, and persistence to ModsSettings.</p>
        <div class="tags">
          <span class="tag">Game.Modding</span>
          <span class="tag">ModSetting</span>
        </div>
      </div>

    </div>

    <h2>Modding Framework</h2>

    <div class="topic-grid">

      <div class="topic-card">
        <h3><a href="save-load-persistence.html">Save/Load &amp; Custom Data Persistence</a></h3>
        <p>How CS2 serializes ECS data to save files. Covers ISerializable, IEmptySerializable, IDefaultSerializable, version-aware deserialization, and the automatic component discovery pipeline.</p>
        <div class="tags">
          <span class="tag">Colossal.Serialization.Entities</span>
          <span class="tag">ISerializable</span>
          <span class="tag">ComponentSerializerLibrary</span>
        </div>
      </div>

    </div>

    <!-- ============================================================ -->
    <footer>
      <p>Research decompiled from Cities: Skylines II game assemblies using ilspycmd. For educational and modding purposes.</p>
      <div class="attribution-footer">
        <p>This documentation was generated using Claude (Anthropic), supervised by the repository owner.</p>
      </div>
    </footer>

  </main>

</div>

</body>
</html>
